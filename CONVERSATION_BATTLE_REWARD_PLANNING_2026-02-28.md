# 전투 처치 보상(이펙트/재화/경험치) 기획 대화 정리

- 날짜: 2026-02-28
- 위치: 프로젝트 루트 대화 정리 문서

## 1) 사용자 요청

- 프로젝트를 스터디한다.
- 특히 전투 씬에서 몬스터 처치 시 획득하는 이펙트/재화/경험치 관련 기획을 우선 본다.
- 기능 구현 전에 기획을 먼저 정의한다.
- 필요한 리소스/의사결정 항목은 사용자에게 질문한다.

## 2) 스터디 결과(현 상태)

- 몬스터 사망 이벤트는 존재하지만, 킬러/보상 정보는 전달하지 않는다.
  - `scripts/enemies/Enemy.gd`
- 히어로 경험치 API(`add_experience`)는 존재하지만 현재 호출 경로가 없다.
  - `scripts/heroes/Hero.gd`
- 전투 보상은 현재 전투 노드 승리 시 고정 골드만 적용된다.
  - `scripts/flow/GameFlowController.gd`
- 전투 UI 상점 골드는 로컬 증감은 되지만 런 상태와의 명시적 동기화 경로가 없다.
  - `scripts/playground/ui/ShopPanel.gd`
- 전투 중 연출은 데미지 텍스트 중심이며, 처치 보상 전용 이펙트/드랍 연출은 없다.
  - `scripts/enemies/ui/EnemyDamageText.gd`
  - `scenes/enemies/base/enemy_base.tscn`
- 문서상 레벨 시스템은 "몬스터 처치 시 EXP 획득"을 명시하고 있으나, 코드 구현은 미완성 상태다.
  - `GAME_PLAN.md`
  - `docs/planning/game_plan_domains/10_level_system.md`

## 3) 구현 전 기획 초안

- 몬스터별 보상 데이터(`kill_gold`, `kill_exp`)를 에디터 인스펙터에서 authoring한다.
- 처치 시 보상은 1차로 "즉시 지급 + 월드 팝업(+G/+EXP)" 방식으로 간다.
- 전투 골드와 상점 골드를 동일 지갑으로 보고, 전투 종료 시 런 상태에 반영한다.
- EXP는 기본 규칙으로 마지막 타격 히어로에게 지급한다.
- 노드 클리어 보상(고정 골드)과 처치 보상(킬 단위)을 분리 집계한다.

## 4) 구현 방향(스크립트 책임)

- `Enemy` 사망 신호에 보상 메타(킬러, gold, exp)를 포함한다.
- 전투 씬에 이벤트 허브(`BattleRewardSystem`)를 두고 처치 보상 분배/연출 트리거를 담당한다.
- UI는 시그널 기반으로만 갱신하고, 상시 폴링 루프를 추가하지 않는다.
- 전투 종료 summary에 킬 보상 집계를 포함해 `GameFlowController`에서 런 상태에 반영한다.

## 5) 사용자 확인 필요 항목

1. 골드 반영 시점: 실시간 반영 vs 전투 종료 1회 반영
2. EXP 분배 규칙: 마지막 타격 1인 vs 파티 균등 분배
3. EXP 지속 범위: 전투 임시값 vs 런 전체 누적 저장
4. 드랍 방식: 즉시 지급(팝업) vs 월드 픽업 오브젝트
5. 수치 데이터 소스: 몬스터 기본값만 vs 라운드 배율까지 포함
6. 필요한 리소스 제공 가능 여부:
   - 코인 아이콘 1종
   - EXP 아이콘 1종
   - 처치 SFX 2종
   - 버스트 스프라이트 1종

## 6) 참고

- 이번 정리는 구현 전 기획 정렬 목적의 대화 기록이다.
- 코드/씬 변경은 아직 수행하지 않았다.

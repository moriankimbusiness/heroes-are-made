# 계획: AGENTS.md 통합 정리 (상세 실행안)

날짜: 2026-02-28  
연결 리서치: `docs/tasks/agents-md-governance-review-2026-02-28/research.md`
실행 결과: `docs/tasks/agents-md-governance-review-2026-02-28/result.md` (완료: 2026-02-28)
계획 상태: 완료 (2026-02-28)

## 1) 계획 목적

리서치 결론(크기 안전성은 높지만 운영 밀도/중복이 높음)에 따라, 루트 `AGENTS.md`를 "항상 로드되는 코어 정책 문서"로 재정렬한다.

- 정책 강도는 유지한다.
- 중복/분산된 강제 문장을 단일 출처로 통합한다.
- 참고성 상세(경로/긴 명령/환경 메모)는 분리한다.

## 2) 현재 기준선(Baseline)

리서치에서 확인된 현재 값:

- 줄 수: 238
- 바이트: 13,192
- H2: 16개, 불릿: 142개
- 중복 군집: Editor/Script, CLI validation, TODO workflow

## 3) 목표 지표(Target)

### 정량 목표

- 줄 수: 120~160줄
- 크기: 16 KiB 이하(권장 8~10 KiB)
- 동일 의무 규칙의 중복 서술: 0건

### 정성 목표

- 한 번 읽고 바로 실행 가능한 구조(스캔성 향상)
- 규칙 충돌 가능성 최소화
- 향후 유지보수 시 수정 지점이 명확(단일 출처)

## 4) 범위 정의

### In Scope

- 루트 `AGENTS.md` 구조 재편
- 중복 문장 통합 및 참조 구조 정리
- 분리 문서 작성(필요 시 `docs/` 하위 운영 문서)
- `TODO.md` 작업 이력 갱신

### Out of Scope

- 게임 플레이/밸런스/런타임 로직 변경
- Godot 씬/스크립트 리팩터링
- 에이전트 외 도구 설정 파일 전면 개편

## 5) 상세 작업 단계

### Phase 0. 준비

목적: 누락 없이 통합하기 위한 인벤토리 확보.

작업:
- `AGENTS.md`의 모든 의무 문장(`must`, `Mandatory`, `Do not`, `only when`) 전수 추출
- 문장별 ID 부여(`POL-001` 형식) 및 위치 기록

산출물:
- 규칙 인벤토리 목록(작업 메모 또는 임시 표)

완료 기준:
- 의무 문장 누락 없이 목록화 완료

### Phase 1. 규칙군 분류와 정본 선정

목적: 중복 규칙을 단일 출처로 정리.

작업:
- 아래 규칙군으로 분류
  - R1: Editor-authoritative + Script boundary
  - R2: Export 변수 문서화 규칙
  - R3: Action animation restart
  - R4: Performance/Architecture review gate
  - R5: Godot CLI validation policy
  - R6: Response format / language policy
  - R7: TODO/GAME_PLAN 동기화 정책
- 동일 의미 문장 중 정본 1개 선정, 나머지는 제거/축약

산출물:
- 규칙군별 정본 문장 목록

완료 기준:
- 모든 규칙군에 "정본 문장 1세트" 존재

### Phase 2. 문서 구조 재설계

목적: 스캔 친화 구조로 재배치.

작업:
- 상단에 "핵심 실행 규칙" 배치
- 규칙 순서 고정:
  1. 우선순위/적용 범위
  2. Editor-first + Script boundary
  3. Validation/Definition of done
  4. 응답 포맷/언어
  5. 워크플로우(TODO/GAME_PLAN)
- 장문 설명은 삭제하고 짧은 명령형 문장으로 축약

산출물:
- 재구성된 `AGENTS.md` 초안

완료 기준:
- 동일 규칙 중복 서술이 사라짐
- 핵심 규칙이 상단에서 빠르게 확인 가능

### Phase 3. 참고성 상세 분리

목적: 코어 AGENTS를 정책 시트로 유지.

작업:
- 아래 내용은 분리 후보로 이동
  - 실행 파일 경로 표
  - 긴 fallback 명령 예시
  - 과거 환경 확인 날짜 메모
- `AGENTS.md`에는 분리 문서 링크만 남김

산출물:
- 분리된 운영 참고 문서 1개 이상(필요 시)
- `AGENTS.md`의 참조 링크

완료 기준:
- 코어 정책 이해에 불필요한 장문 참고가 AGENTS 본문에서 제거됨

### Phase 4. 회귀/충돌 점검

목적: 규칙 손실 없이 안전하게 통합.

작업:
- 인벤토리 대비 누락 규칙 체크
- 충돌 검사:
  - 동일 상황에 상반된 지시 존재 여부
  - 조건문(`only when`) 불명확성 여부
- 샘플 시나리오 점검:
  - 문서만 수정하는 작업
  - Godot 스크립트 수정 작업
  - Godot 씬 수정 작업
  - 리서치/계획 문서 작업

산출물:
- 점검 체크리스트 결과

완료 기준:
- 누락/충돌 0건 확인

### Phase 5. 마감 및 기록

목적: 작업 이력 일관성 유지.

작업:
- `TODO.md` 완료 항목 업데이트
- 필요 시 `docs/tasks/.../research.md`에 결과 링크 추가

산출물:
- 업데이트된 `TODO.md`

완료 기준:
- 작업 이력과 결과 문서가 연결됨

## 6) 검증 체크리스트

아래 항목을 모두 만족해야 완료로 판단한다.

- [x] `AGENTS.md` 줄 수가 목표 범위(120~160)에 근접
- [x] 중복 강제 문장 0건
- [x] CLI 검증 정책 단일 출처화
- [x] TODO/GAME_PLAN 동기화 규칙이 한 위치에 명확히 존재
- [x] 응답 형식/언어 규칙이 분명하고 중복되지 않음
- [x] 분리된 참고 문서 링크가 정상 동작

## 7) 리스크 및 대응

리스크 1: 규칙 축약 중 필수 정책 누락  
대응: Phase 0 인벤토리와 1:1 매핑 검증 필수

리스크 2: 문서 분리 후 탐색성 저하  
대응: AGENTS 상단에 "핵심 규칙 + 참고 문서 링크" 고정 섹션 배치

리스크 3: 향후 규칙 재중복  
대응: "규칙군별 단일 정본 원칙"을 AGENTS 유지보수 규칙으로 명시

## 8) 실행 순서(요약)

1. 인벤토리 추출
2. 중복 통합
3. 구조 재배치
4. 참고 문서 분리
5. 회귀/충돌 점검
6. TODO 반영

## 9) 완료 선언 조건

아래를 모두 만족하면 본 계획 작업 완료로 선언한다.

- 정량 목표 달성(길이/중복)
- 정성 목표 달성(스캔성/명확성)
- 체크리스트 전 항목 통과
- 작업 기록(`TODO.md`) 반영 완료

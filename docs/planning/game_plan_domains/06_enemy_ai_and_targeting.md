# 적 AI 및 타깃팅

## 기본 우선순위
- 적의 기본 이동 목표는 코어다.
- 이동은 경로탐색을 우선하고, 경로가 유효하지 않으면 코어 직선 추적으로 폴백한다.
- 히어로가 감지 범위에 들어오면 코어보다 히어로를 우선 추적한다.
- 감지된 히어로가 여러 명이면 최근접 대상을 선택한다.
- 특수 적은 예외 규칙을 가질 수 있으나 기본 우선순위를 먼저 따른다.

## 공격 전환 규칙
- 추적 대상이 공격 범위에 들어오면 즉시 공격 상태로 전환한다.
- 공격 액션 트리거마다 attack 애니메이션을 재시작한다.
- 공격은 attacks_per_second 기반 주기로 피해를 적용한다.
- 추적 대상이 감지 범위를 이탈하거나 Down/사망 처리되면 코어 타깃으로 복귀한다.

## 범위 체계
- 감지 범위와 공격 범위는 독립적으로 운영한다.
- 범위 값/계산식 소유권은 각 담당 노드(감지/공격)에 둔다.
- 공격 범위 계산식:
- final_attack_range = max(1.0, (base_attack_range + attack_range_add) * attack_range_scale)
- 감지 범위 계산식:
- final_detect_range = max(1.0, (base_detect_range + detect_range_add) * detect_range_scale)
- 적 클릭 시에는 공격 범위 원만 표시한다.

## 코어 공격 규칙
- 공격 가능한 히어로가 없고 코어가 공격 범위 안에 있으면 코어를 공격한다.
- 코어 공격 판정은 공격 범위 원 중심과 코어 사각형 최근접점 거리 기반으로 계산한다.

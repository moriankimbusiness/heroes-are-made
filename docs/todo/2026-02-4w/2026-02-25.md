# 2026-02-25 (수)

## 현재 트랙
- [x] 이월 항목 제거 완료 (백로그 전용 트랙으로 전환)

## 완료 항목
- [x] 히어로 클릭 시 상태창 표시 + 히어로 우측 고정 배치
- [x] 히어로 드래그 이동 중 상태창 추적
- [x] 상태창 좌측 스텟창/우측 장비창 UI 구성
- [x] 힘/민첩/지능 + 물리/마법/공격속도 계산 파이프라인 구현
- [x] 민첩 기반 선형 APS 공식 적용 (`APS = base * (1 + AGI * k)`, 최소 0.1)
- [x] 스텟 양수/음수 표시 규칙 적용 (음수 빨간색)
- [x] 인벤토리 9칸 UI 및 드래그 앤 드랍 슬롯 이동 구현
- [x] 아이템 타입(무기/투구/갑옷/방패/신발) 데이터 모델 구축
- [x] 클릭 자동 장착 + 장비 클릭 해제(인벤토리 반환) 구현
- [x] 장비 5슬롯(머리/왼손/몸/오른손/발) 구현
- [x] 장비/인벤토리 Hover 흰색 윤곽선 + 상세 정보 툴팁 구현
- [x] 동일 아이템 드래그 중 초록 윤곽선, 비동일 아이템 빨강 윤곽선 구현
- [x] 동일 아이템 드롭 시 강화(+1) + 소모 로직 구현
- [x] 강화 단계 배율 테이블 적용 및 전투 스텟 즉시 갱신
- [x] 밸런스 문서 추가
  - [x] `docs/balance/attack_speed_table.md`
  - [x] `docs/balance/enhance_table.md`
- [x] Hero 클릭 시에만 상태창 표시되도록 선택 로직 정리 (자동선택 제거)
- [x] 인벤토리를 Hero별에서 공용 9칸 인벤토리로 전환
- [x] 인벤토리 <-> 장비창 양방향 상호작용 확장
  - [x] 인벤토리 -> 장비창: 클릭 장착 + 드래그 드롭 장착
  - [x] 장비창 -> 인벤토리: 클릭 해제 + 드래그 드롭 이동
- [x] 상태창 외부(비-UI 월드) 클릭 시 상태창 닫기 동작 추가
- [x] Enemy 라운드 체력 설계 반영
  - [x] 최종 체력 공식 분리 적용: `base_max_health * level_hp_scale * round_multiplier`
  - [x] 라운드 체력 배율 테이블 30라운드(1.00 -> 5.99) 공통화
  - [x] Level 1/2 난이도 분리: `level_hp_scale`(L1=1.0, L2=2.0)
  - [x] 밸런스 문서 추가: `docs/balance/enemy_health_round_table.md`
- [x] Enemy 클릭 시 Enemy 상태창 표시 + Enemy 우측 배치/추적
- [x] Enemy 상태창 체력 표시 추가: `현재체력 / 최대체력`
- [x] Enemy 상태창 체력 UI 정수 표기 적용(내부 연산은 기존 float 유지)
- [x] Hero/Enemy 상태창 위치 기준을 씬 앵커(`StatusAnchor`)로 분리
- [x] `hero_base`/`enemy_base`에서 에디터로 상태창 기준 위치 조정 가능하도록 반영
- [x] 하단 중앙 `장비 뽑기` 버튼 UI 추가 (`모험가 뽑기`와 나란히 배치)
- [x] 장비 뽑기 가중치 랜덤 지급 구현 (공용 인벤토리 빈칸 1개 지급)
- [x] 인벤토리 가득 참 상태에서 장비 뽑기 클릭 허용 + 경고 라벨 안내
- [x] 아이템 데이터 원본을 JSON 테이블(`assets/data/items/item_table.json`)로 전환
- [x] 게임 시작 시 `ItemDatabase` Autoload에서 아이템/뽑기 풀 1회 로드
- [x] JSON 파싱/스키마 오류 시 즉시 종료(fail-fast) 정책 반영
- [x] JSON 키 네이밍 축약 적용 (`type/str/agi/int/patk/matk`, `pool`, `start`)
- [x] 아이템 합성 조건을 동일 아이템 + 동일 강화 레벨로 제한 (`+0/+0`, `+1/+1` ...)
- [x] 인벤토리 우클릭 자동 합성 추가 (같은 강화 레벨 짝 자동 탐색 후 1회 합성)
- [x] 인벤토리 드래그 합성 경로를 우클릭과 동일 규칙 함수로 공통화 (같은 아이템+같은 강화 레벨)
- [x] 아이템 티어(`common/uncommon/rare/epic/legendary`) 필드 추가 및 JSON 파싱 검증 반영
- [x] 강화 상한 `+15` 고정 및 상한 도달 아이템 합성 차단
- [x] 강화 시 기본스탯/공격보너스 분리 배율 적용 (`enh_stat`, `enh_atk`)
- [x] Hover 툴팁 최종 수치 표시 + `기본값 x 강화배율` 분해 정보 표시

## 성능/아키텍처 & 검증
- [x] 이벤트 기반 UI 갱신 유지 (Hero 시그널 기반 선택/추적/스텟 갱신)
- [x] 불필요한 `_process`/`_physics_process` 신규 추가 없음
- [x] Inspector/Resource 기반 값(authoritative) 유지
- [x] UI 입력 라우팅 정리: 드래그 중 클릭 닫기 오동작 방지(`_slot_drag_in_progress`)
- [x] Enemy 체력 구조 분리: Enemy 기준체력 + Level 스케일 + Round 배율
- [x] Enemy 상태창 갱신 이벤트 기반 유지(`enemy_clicked`, `enemy_moved`, `health_changed`)
- [x] HeroHUD 신규 `_process` 추가 없이 Enemy 상태창 추적 구현
- [x] HUD(UI) 책임 유지 + 엔티티 씬 앵커 책임 분리 적용
- [x] 장비 뽑기 안내 라벨 자동 숨김을 `SceneTreeTimer` 이벤트 기반으로 구현 (`_process` 미사용)
- [x] 아이템/뽑기 데이터 Editor/Inspector 하드코딩 제거, JSON authoritative 구조로 정리
- [x] 합성 규칙/우클릭 자동 합성 모두 이벤트 입력 기반 처리 (`_process`/`_physics_process` 추가 없음)
- [x] 강화 상한/티어/툴팁 계산 로직 이벤트 기반 갱신 유지 (`_process`/`_physics_process` 추가 없음)
- [x] Godot CLI 검증 통과
  - [x] 명령어: `/mnt/c/Godot_v4.6.1/Godot_v4.6.1-stable_win64_console.exe --headless --path . --quit` (최종 통과)
